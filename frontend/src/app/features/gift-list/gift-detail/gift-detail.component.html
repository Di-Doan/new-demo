<p-toast />
<div
  class="modal fade gift-modal"
  [ngClass]="{ show: visible }"
  *ngIf="visible"
  (click)="close()"
>
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header row d-flex align-items-center">
      <img
        class="gift-detail-img col-md-4 col-12 mx-auto"
        [src]="giftDetail.img"
      />
      <div class="col-md-8 col-12 ps-4 pe-3 pt-3 row">
        <h4 class="text-success col-12 align-self-start">
          {{ giftDetail.name ? giftDetail.name : "Name" }}
        </h4>
        <h6 class="col-12 align-self-start">
          <em
            >Hiệu lực từ
            {{ giftDetail.start_date ? giftDetail.start_date : "..." }} đến
            {{ giftDetail.end_date ? giftDetail.end_date : "..." }}</em
          >
        </h6>
        <h6 class="col-12 align-self-start">
          <span class="text-warning">{{ giftDetail.point | point }} điểm</span>
          để đổi voucher
        </h6>
        <h6
          *ngIf="user.name == ''; else withUserTemplate"
          class="col-12 align-self-center text-danger text-center py-2"
        >
          Vui lòng <strong>đăng nhập</strong> để tiếp tục đổi quà
        </h6>
      </div>
    </div>
    <div class="modal-body">
      <p>
        "But I must explain to you how all this mistaken idea of denouncing
        pleasure and praising pain was born and I will give you a complete
        account of the system, and expound the actual teachings of the great
        explorer of the truth, the master-builder of human happiness. No one
        rejects, dislikes, or avoids pleasure itself, because it is pleasure,
        but because those who do not know how to pursue pleasure rationally
        encounter consequences that are extremely painful.
      </p>
    </div>
  </div>

  <p-confirmDialog [style]="{ width: '450px' }" />
</div>

<ng-template #withUserTemplate>
  <div
    class="col-12 d-flex justify-content-end"
    *ngIf="
      alreadyExchanged(giftDetail._id) == false;
      else alreadyExchangedTemplate
    "
  >
    <button class="btn gift-exchange-btn text-light" (click)="exchangeGift()">
      ĐỔI QUÀ
    </button>
  </div>
</ng-template>

<ng-template #alreadyExchangedTemplate>
  <h6
    class="col-12 align-self-center text-danger text-center py-2"
  >
    Quà đã được đổi
  </h6>
</ng-template>