import{a as $}from"./chunk-XIHQSAZ3.js";import{a as K,b as N,e as U,f as z,g as J,h as Q,i as Y,j as Z,l as ee,m as te,n as ie,o as ne,p as oe,q as re,r as ae}from"./chunk-5B2FHLPS.js";import{e as G,f as W}from"./chunk-TW3HZMAK.js";import{e as X}from"./chunk-XFRROJYK.js";import"./chunk-6MOEIPIA.js";import{e as O,f as q}from"./chunk-UR4Y6GLV.js";import{g as j,h as H,i as R}from"./chunk-BUJY3WGO.js";import{T as x,X as v,aa as P,q as B}from"./chunk-BOYLC3HF.js";import{Ab as h,Bb as b,Cb as f,Jb as M,Kb as l,Lb as C,Ob as k,Pb as A,Qb as D,R as _,Rb as L,Sb as V,Tb as g,Ua as m,Va as S,ga as I,j as w,jb as y,lb as c,ob as T,pa as F,qa as d,ra as u,ub as i,vb as t,wb as a}from"./chunk-5ETVNT53.js";var le=()=>({"min-width":"55rem"}),me=()=>["name","email","title","note"],ce=()=>({width:"450px"}),se=()=>({"border-radius":"50%"});function pe(n,s){if(n&1){let e=h();i(0,"p-button",9),b("click",function(){d(e);let o=f();return u(o.deleteSelectedContacts())}),t()}if(n&2){let e=f();c("disabled",!e.selectedContacts||!e.selectedContacts.length)}}function de(n,s){if(n&1){let e=h();i(0,"div",10)(1,"h5",11),l(2,"Tra So\xE1t Th\xF4ng Tin Li\xEAn H\u1EC7"),t(),i(3,"span",12)(4,"p-iconField")(5,"p-inputIcon"),a(6,"i",13),t(),i(7,"input",14),b("input",function(o){d(e),f();let p=M(5);return u(p.filterGlobal(o.target==null?null:o.target.value,"contains"))}),t()()()()}}function ue(n,s){n&1&&(i(0,"tr",15)(1,"th",16),a(2,"p-tableHeaderCheckbox"),t(),i(3,"th",17),l(4," T\xEAn ng\u01B0\u1EDDi d\xF9ng "),a(5,"p-sortIcon",18),t(),i(6,"th",19),l(7," Email "),a(8,"p-sortIcon",20),t(),i(9,"th",21),l(10," Ch\u1EE9c danh "),a(11,"p-sortIcon",22),t(),i(12,"th",23),l(13," Ghi ch\xFA "),a(14,"p-sortIcon",24),t(),a(15,"th",25),t())}function he(n,s){if(n&1){let e=h();i(0,"tr",26)(1,"td",27),a(2,"p-tableCheckbox",28),t(),i(3,"td",29),l(4),t(),i(5,"td"),l(6),t(),i(7,"td"),l(8),t(),i(9,"td"),l(10),t(),i(11,"td")(12,"p-button",30),b("click",function(){let o=d(e).$implicit,p=f();return u(p.deleteContact(o))}),t()()()}if(n&2){let e=s.$implicit;m(2),c("value",e),m(2),C(e.name),m(2),C(e.email),m(2),C(e.title),m(2),C(e.note),m(2),T(g(8,se)),c("outlined",!0)}}function fe(n,s){n&1&&(i(0,"tr")(1,"td",31),l(2,"Kh\xF4ng c\xF3 li\xEAn h\u1EC7 n\xE0o theo m\u1EE5c t\xECm ki\u1EBFm."),t()())}var Oe=(()=>{class n{constructor(e,r,o){this.confirmationService=e,this.messageService=r,this.contactService=o,this.submitted=!1,this.destroyed$=new w}ngOnInit(){this.fetchContactList()}ngOnChanges(){this.fetchContactList()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}fetchContactList(){this.contactService.getAllContact().pipe(_(this.destroyed$)).subscribe({next:e=>{this.contactList=e.data.result},error:e=>{this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:e.error.errMessage,life:3e3})}})}deleteSelectedContacts(){this.confirmationService.confirm({message:"X\xE1c nh\u1EADn xo\xE1 li\xEAn h\u1EC7 \u0111\xE3 ch\u1ECDn?",header:"X\xE1c nh\u1EADn",icon:"pi pi-exclamation-triangle",accept:()=>{this.contactService.deleteMultipleContact(this.selectedContacts).pipe(_(this.destroyed$)).subscribe({next:()=>{this.selectedContacts=null,this.messageService.add({severity:"success",summary:"Th\xE0nh c\xF4ng",detail:"Xo\xE1 li\xEAn h\u1EC7 th\xE0nh c\xF4ng",life:3e3}),setTimeout(()=>{this.fetchContactList()},1500)},error:e=>{this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:e.error.errMessage,life:3e3})}})}})}deleteContact(e){this.confirmationService.confirm({message:"X\xE1c nh\u1EADn xo\xE1 "+e.name+"?",header:"X\xE1c nh\u1EADn",icon:"pi pi-exclamation-triangle",accept:()=>{this.contactService.deleteSelectedContacts(e._id).pipe(_(this.destroyed$)).subscribe({next:()=>{this.contact=new X,this.messageService.add({severity:"success",summary:"Th\xE0nh c\xF4ng",detail:"Xo\xE1 li\xEAn h\u1EC7 th\xE0nh c\xF4ng",life:3e3}),setTimeout(()=>{this.fetchContactList()},1500)},error:r=>{this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:r.error.errMessage,life:3e3})}})}})}static{this.\u0275fac=function(r){return new(r||n)(S(x),S(v),S($))}}static{this.\u0275cmp=I({type:n,selectors:[["app-admin-contact"]],standalone:!0,features:[L([v,x]),F,V],decls:11,vars:13,consts:[["dt",""],[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["dataKey","_id","currentPageReportTemplate","\u0110ang hi\u1EC7n t\u1EEB {first} t\u1EDBi {last} trong t\u1ED5ng s\u1ED1 {totalRecords} m\u1EE5c",3,"selectionChange","value","rows","paginator","tableStyle","selection","rowHover","showCurrentPageReport","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["severity","danger","label","Xo\xE1","icon","pi pi-trash","outlined","",3,"click","disabled"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-between","gap-3",2,"display","flex","align-items","center"],[1,"m-0","quicksand-bold"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","T\xECm ki\u1EBFm...","aria-label","Global Search",3,"input"],[1,"quicksand-bold"],[2,"width","5rem"],["pSortableColumn","name",2,"min-width","9rem"],["field","name"],["pSortableColumn","email",2,"min-width","10rem"],["field","email"],["pSortableColumn","title",2,"min-width","10rem"],["field","title"],["pSortableColumn","note",2,"min-width","10rem"],["field","note"],[2,"min-width","12rem"],[1,"quicksand-normal"],[2,"width","3rem"],[3,"value"],[2,"min-width","10rem"],["icon","pi pi-trash","severity","danger",3,"click","outlined"],["colspan","8"]],template:function(r,o){if(r&1){let p=h();i(0,"div",1),a(1,"p-toast"),i(2,"p-toolbar",2),y(3,pe,1,1,"ng-template",3),t(),i(4,"p-table",4,0),D("selectionChange",function(E){return d(p),A(o.selectedContacts,E)||(o.selectedContacts=E),u(E)}),y(6,de,8,0,"ng-template",5)(7,ue,16,0,"ng-template",6)(8,he,13,9,"ng-template",7)(9,fe,3,0,"ng-template",8),t(),a(10,"p-confirmDialog"),t()}r&2&&(m(4),c("value",o.contactList)("rows",10)("paginator",!0)("tableStyle",g(10,le)),k("selection",o.selectedContacts),c("rowHover",!0)("showCurrentPageReport",!0)("globalFilterFields",g(11,me)),m(6),T(g(12,ce)))},dependencies:[B,Z,U,P,z,J,Q,Y,ee,j,q,O,R,H,ie,te,W,G,ae,re,oe,ne,N,K]})}}return n})();export{Oe as AdminContactComponent};
